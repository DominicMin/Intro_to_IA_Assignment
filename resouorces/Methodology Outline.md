### **3. Methodology (研究方法)**

#### **3.1 Research Design and Paradigm (研究设计与范式)**

本项目采用**构建性研究/设计科学 (Constructive Research / Design Science)** 的研究范式。其核心目标是设计、构建并评估一个新的人工智能系统——一个结合了**检索式(Retrieval-based)** 与**模板式(Template-based)** 特点的混合式聊天机器人——以解决校园场景下信息获取效率低下和情感交互缺失的实际问题。

本研究的整体流程遵循一个迭代的开发周期：

1. **需求分析与数据采集**: 识别校园场景下的核心信息需求，并收集原始数据。
    
2. **系统设计与构建**: 设计并实现一个包含NLU模块，响应生成模块和交互式前端的系统架构。
    
3. **模型训练与实现**: 利用LLM生成模拟数据的策略训练核心的NLU模型。
    
4. **系统集成与评估**: 将所有模块集成为一个可工作的原型，并通过定量和定性方法进行评估。
    
5. **迭代优化**: 根据评估结果，补充训练数据并对系统进行优化。

#### **3.2 System Architecture (系统架构)**

本聊天机器人系统由前端用户界面和后端处理核心组成。后端核心采用模块化设计，主要由自然语言理解（NLU）单元和响应生成单元构成。

[在这里可以插入一个简单的系统架构流程图：用户输入 -> NLU单元 -> 响应生成单元 -> 用户输出]

**3.2.1 Natural Language Understanding (NLU) Unit (自然语言理解单元)** NLU单元负责将用户的原始文本查询转换为结构化的机器可读数据。它包含三个核心组件：

- **Intent Classification Model (意图识别模型)**: 该模型的目标是识别用户的核心意图。我们将其建模为一个多分类问题，通过**监督学习**实现。其技术栈为一个集成了**TF-IDF文本向量化**和**逻辑回归(Logistic Regression)分类器**的Scikit-learn `Pipeline`。
    
- **Entity Recognition Model (实体识别模型)**: 该模型的目标是从查询中提取关键信息（如地点、时间等）。我们将其建模为一个**序列标注(Sequence Labeling)**问题。具体采用了`spaCy`框架来训练一个自定义的**命名实体识别(Named Entity Recognition, NER)**模型。
    
- **Sentiment Analysis Module (情感分析模块)**: 为了提供更具人文关怀的交互，我们引入了`VADER`情感分析工具。该模块负责评估用户输入的情感倾向，并输出一个包含正面、负面、中性和复合情感分数（compound score）的结构化数据。


**3.2.2 Response Generation Unit (响应生成单元)** 该单元负责根据NLU的输出结果生成最终的自然语言回答。

- **Knowledge Base Retriever (知识库检索器)**: 系统的知识存储在一个结构化的`JSON`数据库中。检索器根据NLU识别出的实体和意图，在数据库中查询相关信息。
    
- **Response Templating Engine (响应模板引擎)**: 我们设计了一个多层级的回答模板库。该引擎根据用户的`意图`和`情感分数`动态选择最合适的回答模板，并将从知识库检索到的数据填充到模板的占位符中，最终组装成完整的回答。

3.2.3 交互式前端 

#### **3.3 Data Collection and Preparation (数据采集与准备)**

高质量的数据是模型性能的基石。我们的数据策略分为两个层面：

- **3.3.1 Knowledge Base Data (知识库原始数据)**: 我们通过查阅学生手册、官方公众号以及其他校园信息渠道，手动整理了关于校园设施、餐厅、学术流程等信息，并将其结构化为一个易于检索的`JSON`文件。
    
- **3.3.2 Model Training Data (模型训练数据)**: 为训练NLU模型，我们采用了**合成数据(Synthetic Data)**策略。具体流程是：首先设计一个**数据生成器 (`data_generator.ipynb`)**，它将预设的意图和实体填入Prompt模板；然后调用本地运行的**Ollama LLM**生成大量的特征-标签对；最后，所有生成的数据都经过**人工抽样检查与修正**，以确保其质量和准确性，最终用于模型训练。

#### **3.4 Evaluation Methods (评估方法)**

为了全面衡量本项目的成效，我们采用了定量和定性相结合的评估方法。

- **3.4.1 Quantitative Evaluation (定量评估)**: 主要针对NLU模型的性能。我们使用独立的测试集，并通过`scikit-learn`的`classification_report`工具自动计算一系列**模型评估指标(Model Evaluation Metrics)**，包括基于**混淆矩阵(Confusion Matrix)**计算出的**精确率(Precision)**、**召回率(Recall)**和**F1分数(F1-Score)**，以评估模型在每个类别上的性能。
    
- **3.4.2 Qualitative Evaluation (定性评估)**: 主要针对整个聊天机器人的用户体验和实用性。我们通过与机器人进行多轮、开放式的对话来执行评估，尤其关注其处理训练数据之外的边缘问题(edge cases)的能力，以检验对话的流畅性、答案的准确性和情感交互的有效性。